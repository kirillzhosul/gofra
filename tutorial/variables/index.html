<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Variables - Gofra</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Gofra</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">About</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../installation/" class="nav-link">Installation</a>
                            </li>
                            <li class="nav-item">
                                <a href="../" class="nav-link">Tutorial</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../advanced/" class="nav-link">Advanced</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a href="https://github.com/kirillzhosul/gofra/edit/main/docs/tutorial/variables.md" class="nav-link"><i class="fa-brands fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#variables" class="nav-link">Variables</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#variable-definitions" class="nav-link">Variable definitions</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#initializers" class="nav-link">Initializers</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#type-inference-and-auto-types" class="nav-link">Type inference and auto types</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#type-casting-at-initializer" class="nav-link">Type casting at initializer</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#constants" class="nav-link">Constants</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#primitive-and-composite-types-differences" class="nav-link">Primitive and composite types: differences</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#local-and-static-global-variable-location-differences" class="nav-link">Local and static (global) variable location: differences</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#local-variables-alignment-on-cpus" class="nav-link">Local variables: alignment on CPUs</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="variables">Variables</h1>
<p><strong>That page is being written, and only may be used as quick-overview</strong></p>
<p>Variables is an container for your arbitrary data (within variable type size), they can be <em>static</em> (<em>global</em>) and <em>local</em> (to functions)</p>
<h2 id="variable-definitions">Variable definitions</h2>
<p>Variable definitions looks like that:</p>
<pre><code class="language-gofra">
// Primitive type
var {name} [type]

// Composite type
var array {type}[{size_in_elements}]
var ptr *{type}

var complex **int[32] // pointer to an pointer containing array of integers
</code></pre>
<p>It must start with <code>var</code> then <code>name</code> and <code>type</code></p>
<h2 id="initializers">Initializers</h2>
<pre><code class="language-gofra">var x int = 10;
var x char = 'a'; // or 97
var x *string = &quot;Hello, World&quot;;
var x int[3] = [1, 2, 3] // Has size inference and validation, rest undefined is always treated as zero initialized (even for stack)
</code></pre>
<h2 id="type-inference-and-auto-types">Type inference and auto types</h2>
<p>If defining an variable without an type and it has proper initializer, type may be omitted:</p>
<pre><code class="language-gofra">var x = 5; // int
var x = &quot;test&quot; // *string
var x = [1, 2, 3] // int[3]
var error = [] // Error: is it int[] or whatever else possible? Requires type explicitly
</code></pre>
<h1 id="type-casting-at-initializer">Type casting at initializer</h1>
<p>For few simple types auto type casting (e.g reinterpret cast) is allowed:</p>
<pre><code class="language-gofra">var x bool = 1; // Reinterpret(*) bytes as bool and allow proper type
var x char = 97 // 'a'
</code></pre>
<h2 id="constants">Constants</h2>
<p>Variable with initializer known at compile time may become const by using this syntax:</p>
<pre><code class="language-gofra">const x = 5;
const var = 10;
</code></pre>
<p>Constants are prohibited to obtain their memory address (restricted modifications) and allows optimizer to apply inlining/unwind and DCE on usage</p>
<h2 id="primitive-and-composite-types-differences">Primitive and composite types: differences</h2>
<p>Primitive type is such type that only contains an size of memory blob and nothing more inside</p>
<p>Composite type is such type which contains another type inside (may be primitive or complex) that it refers to (e.g array of elements contains primitive type of an single element and pointer is containing type of memory it refers to (pointer to an integer is an complex pointer type referencing integer and string is in general an complex type as it refers to array of caricature (contiguous memory blob) as another complex type))</p>
<p>Primitive types:
- int
- char
- byte</p>
<p>Composite type
- Array of {primitive|complex type}
- Pointer to {primitive|complex type}
- Structure with set of {primitive|complex} type inside
Composite types may contain another complex types so pointer to array of pointers to integer is an 2-level complex type</p>
<h2 id="local-and-static-global-variable-location-differences">Local and static (global) variable location: differences</h2>
<p>Static variable is such variable that is defined outside of an function (e.g at top level) while being compiled it located in static memory segment at runtime (e.g data / bss) section, it always initialized and persist it value between function calls (as anyone may modify that variable)</p>
<p>Local variable is such variable that is define inside an function, while being compiled it will be translated into local region on an stack, so with each function call with that variable it will be reset</p>
<pre><code class="language-gofra">// Global variable
// located in static binary segment
var global int

func void main[]
    // Local variable
    // located and initialized at stack
    var local int
end
</code></pre>
<p>Using local/global storage type of variables has no differences for end-user programmer, as it differs at code generation level and only will affect memory layout</p>
<h2 id="local-variables-alignment-on-cpus">Local variables: alignment on CPUs</h2>
<p>Each local variable must be alignment on most architectures (CPUs) so for example definition of three local variables like that:</p>
<pre><code class="language-gofra">var a int
var b int
var c byte
</code></pre>
<p>will result in 24 bytes total space allocated at callee, as:
int: 8 bytes
int: 8 bytes
byte: 1 byte</p>
<p>that sums to 17, but for example on AARCH64 stack must be aligned by 16 bytes so we must align that to next value: 32 bytes
and space that is left after two first integers has 16 (15, excluding third variable) more space which is unusable</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
