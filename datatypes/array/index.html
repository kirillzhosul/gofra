<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Array data type - Gofra</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Gofra</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">About</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../installation/" class="nav-link">Installation</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../tutorial/" class="nav-link">Tutorial</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../advanced/" class="nav-link">Advanced</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a href="https://github.com/kirillzhosul/gofra/edit/main/docs/datatypes/array.md" class="nav-link"><i class="fa-brands fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#array-data-type" class="nav-link">Array data type</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#layout" class="nav-link">Layout</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#syntax" class="nav-link">Syntax</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#initialization" class="nav-link">Initialization</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#incomplete-array-type-definition" class="nav-link">Incomplete array type definition</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#accessing-array-element" class="nav-link">Accessing array element</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="array-data-type">Array data type</h1>
<p>In Gofra <em>array</em> is a composite data type that represents a pointer to a contiguous segment of memory storing a fixed number of elements of the same specified type. 
Unlike dynamic collections, arrays in Gofra have a predetermined size that cannot be changed after declaration.</p>
<h2 id="layout">Layout</h2>
<p>In memory, as array being contiguous blob of memory, it corresponding value points at first element in memory
shifting that pointer</p>
<pre><code>//  [element0element1element2]
//   ^       ^
// array ptr |
//      ptr+sizeof
</code></pre>
<p>So accessing memory at array pointer will lead to reading its first element
While second element is at pointer + size of array element</p>
<p>For <code>int8</code> which size is 8 bytes, <code>var array int[3]</code> according to image above has memory layout like</p>
<p>array      -&gt; pointer to an first element
array + 8  -&gt; pointer to an second element
array + 16 -&gt; pointer to an third element</p>
<p>For convenient usage of layout, see <em>Accessing array element</em> section</p>
<h2 id="syntax">Syntax</h2>
<p>Array type is defined as element type followed by square brackets</p>
<pre><code class="language-gofra">int[32] // Array of 32 integer elements 
int[] // Incomplete array definition, for type parameters
</code></pre>
<h2 id="initialization">Initialization</h2>
<p>Arrays currently does not have constructors, and by default all arrays are zero-initialized
You has to manually initialize array with memory write instructions</p>
<h2 id="incomplete-array-type-definition">Incomplete array type definition</h2>
<p>As you see before, there is possibility to define an incomplete type for array (e.g <code>int[]</code>) this has no effect while used as variable or field type
as leading to generation of an empty blob segment (zero elements by default, meaning size of array is zero, no way to generate that blob or it is inaccessible)
This incomplete array types is used as function parameters, as mark that array has any arbitrary size while passed to desired function:</p>
<pre><code class="language-gofra">func void incomplete_array[int[]]
    ...
end
</code></pre>
<p>This function can be called with array of any size like <code>int[32]</code> or <code>int[1]</code> but any other type is prohibited
Mostly, useful for accepting array of character as strings, as size is useless mostly for these function (e.g to calculate string size)</p>
<h2 id="accessing-array-element">Accessing array element</h2>
<p>As documented in <em>Layout</em> section, you must already know how does array layouts in memory, but using pointer arithmetics is weird as you can access direct array indices at runtime via</p>
<pre><code class="language-gofra">var array int[32]

array[0] // pointer to an first element, same as `array`
array[3] // pointer to third element, same as `array + sizeof(int) * 3` or `array + 8 * 3` which is shift pointer by 24
</code></pre>
<h3 id="pointer-arithmetics-equivalent">Pointer arithmetics equivalent</h3>
<pre><code class="language-gofra">var array int[32]

array 8 0 * + // pointer to first element
array 8 3 * + // pointer to third element
</code></pre>
<h3 id="oob-out-of-bounds">OOB (Out-Of-Bounds)</h3>
<p>Gofra performs compile-time bounds checking where possible:</p>
<pre><code class="language-gofra">var array int[5]
array[5] // Compilation error: OOB for array access
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
