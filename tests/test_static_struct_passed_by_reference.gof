/// Tests that passing structure as pointer to another function works and allows to work with that
#include "std.gof"

#define TESTKIT_EXPECTED_EXIT_CODE 69

struct struct_
    field int
end

var x struct_

func void f[*struct_]
    var n *struct_; &n swap !<

    &n.field TESTKIT_EXPECTED_EXIT_CODE !<
end

no_return func void main[]
    &x call f

    x.field exit // TODO: Remove exit after fix
end